# 足立区ニュース収集ツール - 要件定義書

## 要件定義の作成原則
- **「あったらいいな」は絶対に作らない**
- **拡張可能性のための余分な要素は一切追加しない**
- **将来の「もしかして」のための準備は禁止**
- **今、ここで必要な最小限の要素のみ**

---

## 1. プロジェクト概要

### 1.1 成果目標
足立区および区内地名に関するWeb上の最新ニュースを毎日自動収集し、一覧表示できるデモツールを開発。案件獲得に繋げる。

### 1.2 成功指標

#### 定量的指標
- 毎日1回以上の自動情報収集が実行される
- 足立区関連キーワード10個以上で検索できる
- 収集結果が24時間以内の新着情報を含む
- 1画面で当日の収集結果を確認できる
- 過去7日分の履歴を閲覧できる

#### 定性的指標
- クライアントが「これなら使える」と感じるシンプルなUI
- 非技術者でも操作方法がすぐわかる
- デモとして見せた時にインパクトがある
- 実際の運用イメージが湧く完成度

---

## 2. システム全体像

### 2.1 主要機能一覧
- **ニュース収集**: Google News RSSから足立区関連ニュースを自動取得
- **一覧表示**: 収集したニュースをWebブラウザで閲覧
- **フィルタリング**: キーワードによる絞り込み
- **履歴管理**: 過去7日分の収集結果を保持

### 2.2 ユーザーロールと権限（MVP：認証なし）
- **閲覧者**: 全機能にアクセス可能（認証不要）

### 2.3 認証・認可要件
- **認証方式**: なし（公開ページ）
- **セキュリティレベル**: 公開情報のみ扱うため低
- **管理機能**: 不要

---

## 3. ページ詳細仕様

### 3.1 P-001: ニュース一覧ページ

#### 目的
足立区関連の最新ニュースを一覧表示し、クライアントが「毎日の情報収集」の価値を即座に体感できるようにする。

#### 主要機能
- 今日収集したニュース一覧表示
- キーワードフィルター（足立区、北千住、竹ノ塚など）
- 最終更新日時の表示
- 記事タイトル + 概要 + ソースリンク
- 収集履歴ページへのナビゲーション

#### 必要な操作
| 操作種別 | 操作内容 | 必要な入力 | 期待される出力 |
|---------|---------|-----------|---------------|
| 取得 | 本日のニュース一覧取得 | なし | ニュース配列 |
| フィルター | キーワードで絞り込み | キーワード文字列 | 絞り込まれたニュース配列 |

#### 処理フロー
1. ページ読み込み時にJSONファイルからニュースデータ取得
2. 一覧形式で表示
3. ユーザーがキーワードを選択するとフィルタリング
4. 記事クリックで元記事へ遷移（外部リンク）

#### データ構造（概念）
```yaml
NewsItem:
  識別子: id（一意）
  基本情報:
    - title（必須）: 記事タイトル
    - description（任意）: 記事概要
    - link（必須）: 元記事URL
    - source（必須）: ニュースソース名
    - pubDate（必須）: 公開日時
    - keyword（必須）: 検索に使用したキーワード
  メタ情報:
    - collectedAt: 収集日時
```

### 3.2 P-002: 収集履歴ページ

#### 目的
過去数日分の収集結果を確認し、「毎日収集」が機能していることを証明して信頼性をアピールする。

#### 主要機能
- 日付別の収集結果一覧
- 収集件数の表示
- 過去7日分のデータ閲覧
- ニュース一覧ページへのナビゲーション

#### 必要な操作
| 操作種別 | 操作内容 | 必要な入力 | 期待される出力 |
|---------|---------|-----------|---------------|
| 取得 | 日付一覧取得 | なし | 日付と件数の配列 |
| 取得 | 特定日のニュース取得 | 日付 | その日のニュース配列 |

#### 処理フロー
1. ページ読み込み時に過去7日分の収集サマリー取得
2. 日付別に件数を表示
3. 日付クリックでその日のニュース詳細表示

#### データ構造（概念）
```yaml
CollectionHistory:
  識別子: date（日付文字列）
  基本情報:
    - date（必須）: 収集日
    - totalCount（必須）: 収集件数
    - keywords（必須）: 使用したキーワード一覧
  関連:
    - newsItems（1対多）: その日のニュース一覧
```

---

## 4. データ設計概要

### 4.1 主要エンティティ

```yaml
NewsItem:
  概要: 収集したニュース記事1件
  主要属性:
    - 記事情報（title, description, link, source, pubDate）
    - 収集情報（keyword, collectedAt）
  関連:
    - CollectionHistory（多対1）

CollectionHistory:
  概要: 日次の収集結果サマリー
  主要属性:
    - 日付情報（date）
    - 統計情報（totalCount）
  関連:
    - NewsItem（1対多）
```

### 4.2 エンティティ関係図
```
CollectionHistory ─── NewsItem （1対多）
     │
     └─ date: "2025-01-14"
        totalCount: 25
        newsItems: [...]
```

### 4.3 バリデーションルール
```yaml
title:
  - ルール: 空文字不可、500文字以内
  - 理由: 表示とデータ整合性のため

link:
  - ルール: 有効なURL形式
  - 理由: 外部リンクとして機能させるため

pubDate:
  - ルール: 有効な日時形式
  - 理由: ソート・フィルタリングに使用するため
```

---

## 5. 制約事項

### 外部API制限
- **Google News RSS**: 公式APIではないため仕様変更の可能性あり

### 技術的制約
- **収集頻度**: GitHub Actions無料枠内（1日1回推奨）
- **データ保持**: 過去7日分（JSONファイルサイズ制限考慮）
- **リアルタイム性**: 毎日1回の収集のため、リアルタイム更新は不可

---

## 5.1 セキュリティ要件

### 基本方針
本プロジェクトは公開情報のみを扱うMVPのため、最小限のセキュリティ対策を実施。

### プロジェクト固有の必須要件

**認証機能がない場合（該当）**:
- ブルートフォース対策は不要
- 基本的なセキュリティヘッダーのみ設定

**その他の一般要件**:
- ✅ HTTPSの強制（Vercelで自動対応）
- ✅ 入力値のサニタイゼーション（XSS対策）
- ✅ エラーメッセージでの情報漏洩防止

---

### 運用要件：GitHub Actions

**定期実行設定**:
- 実行タイミング: 毎日午前9時（JST）
- 実行内容: ニュース収集スクリプト
- 結果保存: JSONファイルをコミット

---

## 6. 複合API処理（バックエンド内部処理）

### 複合処理-001: 日次ニュース収集
**トリガー**: GitHub Actions スケジュール実行（毎日9:00 JST）
**処理フロー**:
1. 足立区関連キーワードリストを読み込み
2. 各キーワードでGoogle News RSSを取得
3. 重複記事を除去
4. JSONファイルに保存
5. GitHubリポジトリにコミット
**結果**: 更新されたJSONファイル
**外部サービス依存**: Google News RSS

---

## 7. 技術スタック

### フロントエンド
```yaml
フレームワーク: React 18
言語: TypeScript 5
UIライブラリ: MUI v6
状態管理: Zustand
ルーティング: React Router v6
ビルドツール: Vite 5
ホスティング: Vercel
```

### バックエンド（収集スクリプト）
```yaml
言語: Python 3.11
用途: RSS取得・パース処理
実行環境: GitHub Actions
```

### データストレージ
```yaml
形式: JSONファイル
保存先: GitHubリポジトリ内
```

---

## 8. 必要な外部サービス・アカウント

### 必須サービス
| サービス名 | 用途 | 取得先 | 備考 |
|-----------|------|--------|------|
| Google News RSS | ニュース取得 | - | アカウント不要 |
| GitHub | コード管理・定期実行 | github.com | 無料アカウント |
| Vercel | フロントエンドホスティング | vercel.com | 無料アカウント |

### オプションサービス
なし

---

## 9. 今後の拡張予定

**原則**: 拡張予定があっても、必要最小限の実装のみを行う

（拡張候補があれば以下に記載、ただし実装はしない）
- SNS連携（X API）: 予算確保後に検討
- メール通知機能: クライアント要望があれば
- 検索キーワードのカスタマイズ機能: 管理画面追加時に

---

## 10. 検索キーワード一覧

足立区および区内の主要地名：

```yaml
キーワード:
  - 足立区
  - 北千住
  - 竹ノ塚
  - 西新井
  - 綾瀬
  - 梅島
  - 五反野
  - 青井
  - 六町
  - 舎人
  - 花畑
  - 千住
```

---

*作成日: 2025-01-14*
*バージョン: 1.0*
